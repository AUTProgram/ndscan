

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API documentation &mdash; ndscan  documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://oxfordiontrapgroup.github.io/ndscan/apidocs.html"/>
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="ndscan" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> ndscan
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">API documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#fragments">Fragments</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-ndscan.fragment"><code class="docutils literal notranslate"><span class="pre">ndscan.fragment</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ndscan.parameters"><code class="docutils literal notranslate"><span class="pre">ndscan.parameters</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ndscan.result_channels"><code class="docutils literal notranslate"><span class="pre">ndscan.result_channels</span></code> module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#scan-execution">Scan execution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-ndscan.scan_runner"><code class="docutils literal notranslate"><span class="pre">ndscan.scan_runner</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ndscan.subscan"><code class="docutils literal notranslate"><span class="pre">ndscan.subscan</span></code> module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-ndscan.auto_fit"><code class="docutils literal notranslate"><span class="pre">ndscan.auto_fit</span></code> module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#experiment-entry-points">Experiment entry points</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-ndscan.experiment"><code class="docutils literal notranslate"><span class="pre">ndscan.experiment</span></code> module</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ndscan</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>API documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OxfordIonTrapGroup/ndscan/blob/master/docs/apidocs.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="api-documentation">
<h1>API documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="fragments">
<h2>Fragments<a class="headerlink" href="#fragments" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-ndscan.fragment">
<span id="ndscan-fragment-module"></span><h3><a class="reference internal" href="#module-ndscan.fragment" title="ndscan.fragment"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ndscan.fragment</span></code></a> module<a class="headerlink" href="#module-ndscan.fragment" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="ndscan.fragment.Fragment">
<em class="property">class </em><code class="descclassname">ndscan.fragment.</code><code class="descname">Fragment</code><span class="sig-paren">(</span><em>managers_or_parent</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/fragment.html#Fragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.Fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Main building block.</p>
<dl class="method">
<dt id="ndscan.fragment.Fragment.build">
<code class="descname">build</code><span class="sig-paren">(</span><em>fragment_path: List[str], *args, **kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/fragment.html#Fragment.build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.Fragment.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise this fragment instance; called from the <code class="docutils literal notranslate"><span class="pre">HasEnvironment</span></code>
constructor.</p>
<p>This sets up the machinery for registering parameters and result channels with
the fragment tree, and then calls <a class="reference internal" href="#ndscan.fragment.Fragment.build_fragment" title="ndscan.fragment.Fragment.build_fragment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_fragment()</span></code></a> to actually perform the
fragment-specific setup. This method should not typically be overwritten.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Params fragment_path:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body">Full path of the fragment, as a list starting from the
root. For instance, <code class="docutils literal notranslate"><span class="pre">[]</span></code> for the top-level fragment, or <code class="docutils literal notranslate"><span class="pre">[&quot;foo&quot;,</span> <span class="pre">&quot;bar&quot;]</span></code>
for a subfragment created by <code class="docutils literal notranslate"><span class="pre">setattr_fragment(&quot;bar&quot;,</span> <span class="pre">…)</span></code> in a fragment
created by <code class="docutils literal notranslate"><span class="pre">setattr_fragment(&quot;foo&quot;,</span> <span class="pre">…)</span></code>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Params args:</th><td class="field-body">Arguments to be forwarded to <a class="reference internal" href="#ndscan.fragment.Fragment.build_fragment" title="ndscan.fragment.Fragment.build_fragment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_fragment()</span></code></a>.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Params kwargs:</th><td class="field-body">Keyword arguments to be forwarded to <a class="reference internal" href="#ndscan.fragment.Fragment.build_fragment" title="ndscan.fragment.Fragment.build_fragment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_fragment()</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ndscan.fragment.Fragment.host_setup">
<code class="descname">host_setup</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/fragment.html#Fragment.host_setup"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.Fragment.host_setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Called on the host, before the kernel is entered.</p>
</dd></dl>

<dl class="method">
<dt id="ndscan.fragment.Fragment.build_fragment">
<code class="descname">build_fragment</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/ndscan/fragment.html#Fragment.build_fragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.Fragment.build_fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs initialisation specific to this fragment type.</p>
<p>Like <code class="docutils literal notranslate"><span class="pre">build()</span></code> for a bare <code class="docutils literal notranslate"><span class="pre">HasEnvironment</span></code>, this is where all of the
user-specified initialisation should take place (rather than, say, the
constructor, or <code class="docutils literal notranslate"><span class="pre">build()</span></code>).</p>
<p>While this method executes, the various <code class="docutils literal notranslate"><span class="pre">setattr_*()</span></code> functions can be used
to create subfragments, parameters, and result channels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>args</strong> – Any extra arguments passed to the <code class="docutils literal notranslate"><span class="pre">HasEnvironment</span></code> constructor.</li>
<li><strong>kwargs</strong> – Any extra keyword arguments passed to the <code class="docutils literal notranslate"><span class="pre">HasEnvironment</span></code>
constructor.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ndscan.fragment.Fragment.setattr_fragment">
<code class="descname">setattr_fragment</code><span class="sig-paren">(</span><em>name: str, fragment_class: Type[Fragment], *args, **kwargs</em><span class="sig-paren">)</span> &#x2192; ndscan.fragment.Fragment<a class="reference internal" href="_modules/ndscan/fragment.html#Fragment.setattr_fragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.Fragment.setattr_fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a subfragment of the given name and type.</p>
<p>Can only be called during <a class="reference internal" href="#ndscan.fragment.Fragment.build_fragment" title="ndscan.fragment.Fragment.build_fragment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_fragment()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> – The fragment name; part of the fragment path. Must be a valid
Python identifier; the fragment will be accessible as <code class="docutils literal notranslate"><span class="pre">self.&lt;name&gt;</span></code>.</li>
<li><strong>fragment_class</strong> – The type of the subfragment to instantiate.</li>
<li><strong>args</strong> – Any extra arguments to forward to the subfragment
<code class="docutils literal notranslate"><span class="pre">build_fragment()</span></code> call.</li>
<li><strong>kwargs</strong> – Any extra keyword arguments to forward to the subfragment
<code class="docutils literal notranslate"><span class="pre">build_fragment()</span></code> call.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The newly created fragment instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ndscan.fragment.Fragment.setattr_param">
<code class="descname">setattr_param</code><span class="sig-paren">(</span><em>name: str</em>, <em>param_class: Type</em>, <em>description: str</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span> &#x2192; ndscan.parameters.ParamHandle<a class="reference internal" href="_modules/ndscan/fragment.html#Fragment.setattr_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.Fragment.setattr_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a parameter of the given name and type.</p>
<p>Can only be called during <a class="reference internal" href="#ndscan.fragment.Fragment.build_fragment" title="ndscan.fragment.Fragment.build_fragment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_fragment()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> – The parameter name, to be part of its FQN. Must be a valid Python
identifier; the parameter handle will be accessible as <code class="docutils literal notranslate"><span class="pre">self.&lt;name&gt;</span></code>.</li>
<li><strong>param_class</strong> – The type of parameter to instantiate.</li>
<li><strong>description</strong> – The human-readable parameter name.</li>
<li><strong>args</strong> – Any extra arguments to pass to the <code class="docutils literal notranslate"><span class="pre">param_class</span></code> constructor.</li>
<li><strong>kwargs</strong> – Any extra keyword arguments to pass to the the <code class="docutils literal notranslate"><span class="pre">param_class</span></code>
constructor.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The newly created parameter handle.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ndscan.fragment.Fragment.setattr_param_rebind">
<code class="descname">setattr_param_rebind</code><span class="sig-paren">(</span><em>name: str</em>, <em>original_owner: ndscan.fragment.Fragment</em>, <em>original_name: Optional[str] = None</em>, <em>**kwargs</em><span class="sig-paren">)</span> &#x2192; ndscan.parameters.ParamHandle<a class="reference internal" href="_modules/ndscan/fragment.html#Fragment.setattr_param_rebind"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.Fragment.setattr_param_rebind" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a parameter that overrides the value of a subfragment parameter.</p>
<p>The most common use case for this is to specialise the operation of a generic
subfragment. For example, there might be a fragment <code class="docutils literal notranslate"><span class="pre">Fluoresce</span></code> that drives
a cycling transition in an ion with parameters for intensity and detuning.
Higher-level fragments for Doppler cooling, readout, etc. might then use
<code class="docutils literal notranslate"><span class="pre">Fluoresce</span></code>, rebinding its intensity and detuning parameters to values and
defaults appropriate for those particular tasks.</p>
<p>Can only be called during <a class="reference internal" href="#ndscan.fragment.Fragment.build_fragment" title="ndscan.fragment.Fragment.build_fragment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_fragment()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> – The parameter name, to be part of its FQN. Must be a valid Python
identifier; the parameter handle will be accessible as <code class="docutils literal notranslate"><span class="pre">self.&lt;name&gt;</span></code>.</li>
<li><strong>original_owner</strong> – The fragment owning the parameter to rebind.</li>
<li><strong>original_name</strong> – The name of the original parameter (i.e.
<code class="docutils literal notranslate"><span class="pre">&lt;original_owner&gt;.&lt;original_name&gt;</span></code>). If <code class="docutils literal notranslate"><span class="pre">None</span></code>, defaults to <code class="docutils literal notranslate"><span class="pre">name</span></code>.</li>
<li><strong>kwargs</strong> – Any attributes to override in the parameter metadata, which
defaults to that of the original parameter.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The newly created parameter handle.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ndscan.fragment.Fragment.setattr_result">
<code class="descname">setattr_result</code><span class="sig-paren">(</span><em>name: str</em>, <em>channel_class: Type[ndscan.result_channels.ResultChannel] = &lt;class 'ndscan.result_channels.FloatChannel'&gt;</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span> &#x2192; ndscan.result_channels.ResultChannel<a class="reference internal" href="_modules/ndscan/fragment.html#Fragment.setattr_result"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.Fragment.setattr_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a result channel of the given name and type.</p>
<p>Can only be called during <a class="reference internal" href="#ndscan.fragment.Fragment.build_fragment" title="ndscan.fragment.Fragment.build_fragment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_fragment()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> – The result channel name, to be part of its full path. Must be a
valid Python identifier. The channel instance will be accessible as
<code class="docutils literal notranslate"><span class="pre">self.&lt;name&gt;</span></code>.</li>
<li><strong>channel_class</strong> – The type of result channel to instantiate.</li>
<li><strong>args</strong> – Any extra arguments to pass to the <code class="docutils literal notranslate"><span class="pre">channel_class</span></code> constructor.</li>
<li><strong>kwargs</strong> – Any extra keyword arguments to pass to the the <code class="docutils literal notranslate"><span class="pre">channel_class</span></code>
constructor.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The newly created result channel instance.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ndscan.fragment.Fragment.override_param">
<code class="descname">override_param</code><span class="sig-paren">(</span><em>param_name: str</em>, <em>initial_value: Any = None</em><span class="sig-paren">)</span> &#x2192; Tuple[Any, ndscan.parameters.ParamStore]<a class="reference internal" href="_modules/ndscan/fragment.html#Fragment.override_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.Fragment.override_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Override the parameter with the given name and set it to the provided value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>param_name</strong> – The name of the parameter.</li>
<li><strong>initial_value</strong> – The initial value for the parameter. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the
default from the parameter schema is used.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A tuple <code class="docutils literal notranslate"><span class="pre">(param,</span> <span class="pre">store)</span></code> of the parameter metadata and the newly
created <code class="xref py py-class docutils literal notranslate"><span class="pre">ParamStore</span></code> instance that the parameter handles are now
bound to.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ndscan.fragment.Fragment.init_params">
<code class="descname">init_params</code><span class="sig-paren">(</span><em>overrides: Dict[str</em>, <em>List[dict]] = {}</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/ndscan/fragment.html#Fragment.init_params"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.Fragment.init_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise free parameters of this fragment and all its subfragments.</p>
<p>If a relevant override is given, the specified ParamStore is used.
Otherwise, the default value is evaluated and a new store created.</p>
<p>This method should be called after <a class="reference internal" href="#ndscan.fragment.Fragment.build" title="ndscan.fragment.Fragment.build"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build()</span></code></a>, but before any of the
fragment’s user-defined functions are used.
<a class="reference internal" href="#ndscan.experiment.FragmentScanExperiment" title="ndscan.experiment.FragmentScanExperiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">ndscan.experiment.FragmentScanExperiment</span></code></a> takes care of this, but the
function can be called manually if fragments are to be used in other contexts,
e.g. from a standalone <code class="docutils literal notranslate"><span class="pre">artiq.language.environment.EnvExperiment</span></code>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ndscan.fragment.ExpFragment">
<em class="property">class </em><code class="descclassname">ndscan.fragment.</code><code class="descname">ExpFragment</code><span class="sig-paren">(</span><em>managers_or_parent</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/fragment.html#ExpFragment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.ExpFragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Fragment that supports the notion of being run to produce results.</p>
<dl class="method">
<dt id="ndscan.fragment.ExpFragment.run_once">
<code class="descname">run_once</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/fragment.html#ExpFragment.run_once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.fragment.ExpFragment.run_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute the experiment described by the fragment once with the current
parameters, producing one set of results (if any).</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-ndscan.parameters">
<span id="ndscan-parameters-module"></span><h3><a class="reference internal" href="#module-ndscan.parameters" title="ndscan.parameters"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ndscan.parameters</span></code></a> module<a class="headerlink" href="#module-ndscan.parameters" title="Permalink to this headline">¶</a></h3>
<p>Fragment-side parameter containers.</p>
<p>The ARTIQ compiler does not support templates or generics (neither in the sense
of typing.Generic, nor any other), yet requires the inferred types/signatures
of fields to match across all instances of a class. Hence, we have no option
but to hang our heads in shame and manually instantiate the parameter handling
machinery for all the value types.</p>
<dl class="function">
<dt id="ndscan.parameters.type_string_to_param">
<code class="descclassname">ndscan.parameters.</code><code class="descname">type_string_to_param</code><span class="sig-paren">(</span><em>name: str</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/parameters.html#type_string_to_param"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.parameters.type_string_to_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Resolves param schema type strings to Param implementations.</p>
</dd></dl>

<dl class="exception">
<dt id="ndscan.parameters.InvalidDefaultError">
<em class="property">exception </em><code class="descclassname">ndscan.parameters.</code><code class="descname">InvalidDefaultError</code><a class="reference internal" href="_modules/ndscan/parameters.html#InvalidDefaultError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.parameters.InvalidDefaultError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a default value is outside the specified range of valid parameter
values.</p>
</dd></dl>

<dl class="class">
<dt id="ndscan.parameters.ParamStore">
<em class="property">class </em><code class="descclassname">ndscan.parameters.</code><code class="descname">ParamStore</code><span class="sig-paren">(</span><em>identity: Tuple[str, str], value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/parameters.html#ParamStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.parameters.ParamStore" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>identity</strong> – <code class="docutils literal notranslate"><span class="pre">(fqn,</span> <span class="pre">path_spec)</span></code> pair representing the identity of this param
store, i.e. the override/default value it was created for.</li>
<li><strong>value</strong> – The initial value.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="ndscan.parameters.FloatParamStore">
<em class="property">class </em><code class="descclassname">ndscan.parameters.</code><code class="descname">FloatParamStore</code><span class="sig-paren">(</span><em>identity: Tuple[str, str], value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/parameters.html#FloatParamStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.parameters.FloatParamStore" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="ndscan.parameters.IntParamStore">
<em class="property">class </em><code class="descclassname">ndscan.parameters.</code><code class="descname">IntParamStore</code><span class="sig-paren">(</span><em>identity: Tuple[str, str], value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/parameters.html#IntParamStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.parameters.IntParamStore" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="ndscan.parameters.StringParamStore">
<em class="property">class </em><code class="descclassname">ndscan.parameters.</code><code class="descname">StringParamStore</code><span class="sig-paren">(</span><em>identity: Tuple[str, str], value</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/parameters.html#StringParamStore"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.parameters.StringParamStore" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-ndscan.result_channels">
<span id="ndscan-result-channels-module"></span><h3><a class="reference internal" href="#module-ndscan.result_channels" title="ndscan.result_channels"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ndscan.result_channels</span></code></a> module<a class="headerlink" href="#module-ndscan.result_channels" title="Permalink to this headline">¶</a></h3>
<p>Result handling building blocks.</p>
<dl class="class">
<dt id="ndscan.result_channels.ResultSink">
<em class="property">class </em><code class="descclassname">ndscan.result_channels.</code><code class="descname">ResultSink</code><a class="reference internal" href="_modules/ndscan/result_channels.html#ResultSink"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ResultSink" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="ndscan.result_channels.LastValueSink">
<em class="property">class </em><code class="descclassname">ndscan.result_channels.</code><code class="descname">LastValueSink</code><a class="reference internal" href="_modules/ndscan/result_channels.html#LastValueSink"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.LastValueSink" title="Permalink to this definition">¶</a></dt>
<dd><p>Sink that stores the last-pushed value.</p>
<dl class="method">
<dt id="ndscan.result_channels.LastValueSink.get_last">
<code class="descname">get_last</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="_modules/ndscan/result_channels.html#LastValueSink.get_last"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.LastValueSink.get_last" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the last-pushed value, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if none yet.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ndscan.result_channels.ArraySink">
<em class="property">class </em><code class="descclassname">ndscan.result_channels.</code><code class="descname">ArraySink</code><a class="reference internal" href="_modules/ndscan/result_channels.html#ArraySink"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ArraySink" title="Permalink to this definition">¶</a></dt>
<dd><p>Sink that stores all pushed values in a list.</p>
<dl class="method">
<dt id="ndscan.result_channels.ArraySink.get_all">
<code class="descname">get_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List[Any]<a class="reference internal" href="_modules/ndscan/result_channels.html#ArraySink.get_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ArraySink.get_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of all previously pushed values.</p>
</dd></dl>

<dl class="method">
<dt id="ndscan.result_channels.ArraySink.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/ndscan/result_channels.html#ArraySink.clear"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ArraySink.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear the list of previously pushed values.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ndscan.result_channels.AppendingDatasetSink">
<em class="property">class </em><code class="descclassname">ndscan.result_channels.</code><code class="descname">AppendingDatasetSink</code><span class="sig-paren">(</span><em>managers_or_parent</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/result_channels.html#AppendingDatasetSink"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.AppendingDatasetSink" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ndscan.result_channels.AppendingDatasetSink.build">
<code class="descname">build</code><span class="sig-paren">(</span><em>key: str</em>, <em>broadcast: bool = True</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/ndscan/result_channels.html#AppendingDatasetSink.build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.AppendingDatasetSink.build" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> – Dataset key to store results in. Set to an array on the first push,
and subsequently appended to.</li>
<li><strong>broadcast</strong> – Whether to set the dataset in broadcast mode.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ndscan.result_channels.AppendingDatasetSink.get_all">
<code class="descname">get_all</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; List[Any]<a class="reference internal" href="_modules/ndscan/result_channels.html#AppendingDatasetSink.get_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.AppendingDatasetSink.get_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Read back the previously pushed values from the target dataset (if any).</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ndscan.result_channels.ScalarDatasetSink">
<em class="property">class </em><code class="descclassname">ndscan.result_channels.</code><code class="descname">ScalarDatasetSink</code><span class="sig-paren">(</span><em>managers_or_parent</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/result_channels.html#ScalarDatasetSink"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ScalarDatasetSink" title="Permalink to this definition">¶</a></dt>
<dd><p>Sink that writes pushed results to a dataset, overwriting its previous value
if any.</p>
<dl class="method">
<dt id="ndscan.result_channels.ScalarDatasetSink.build">
<code class="descname">build</code><span class="sig-paren">(</span><em>key: str</em>, <em>broadcast: bool = True</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/ndscan/result_channels.html#ScalarDatasetSink.build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ScalarDatasetSink.build" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>key</strong> – Dataset key to write the value to.</li>
<li><strong>broadcast</strong> – Whether to set the dataset in broadcast mode.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ndscan.result_channels.ScalarDatasetSink.get_last">
<code class="descname">get_last</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Any<a class="reference internal" href="_modules/ndscan/result_channels.html#ScalarDatasetSink.get_last"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ScalarDatasetSink.get_last" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the last pushed value, or <code class="docutils literal notranslate"><span class="pre">None</span></code> if none yet.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ndscan.result_channels.ResultChannel">
<em class="property">class </em><code class="descclassname">ndscan.result_channels.</code><code class="descname">ResultChannel</code><span class="sig-paren">(</span><em>path: str</em>, <em>description: str = ''</em>, <em>display_hints: Dict[str</em>, <em>Any] = {}</em>, <em>save_by_default: bool = True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/result_channels.html#ResultChannel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ResultChannel" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="ndscan.result_channels.ResultChannel.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/ndscan/result_channels.html#ResultChannel.describe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ResultChannel.describe" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ndscan.result_channels.ResultChannel.is_muted">
<code class="descname">is_muted</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; bool<a class="reference internal" href="_modules/ndscan/result_channels.html#ResultChannel.is_muted"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ResultChannel.is_muted" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ndscan.result_channels.ResultChannel.set_sink">
<code class="descname">set_sink</code><span class="sig-paren">(</span><em>sink: ndscan.result_channels.ResultSink</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/ndscan/result_channels.html#ResultChannel.set_sink"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ResultChannel.set_sink" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ndscan.result_channels.ResultChannel.push">
<code class="descname">push</code><span class="sig-paren">(</span><em>raw_value</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/ndscan/result_channels.html#ResultChannel.push"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.ResultChannel.push" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="ndscan.result_channels.NumericChannel">
<em class="property">class </em><code class="descclassname">ndscan.result_channels.</code><code class="descname">NumericChannel</code><span class="sig-paren">(</span><em>path: str</em>, <em>description: str = ''</em>, <em>display_hints: Dict[str</em>, <em>Any] = {}</em>, <em>min=None</em>, <em>max=None</em>, <em>unit: str = ''</em>, <em>scale=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/result_channels.html#NumericChannel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.NumericChannel" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for channels of numerical results, with scale/unit semantics and
optional range limits.</p>
</dd></dl>

<dl class="class">
<dt id="ndscan.result_channels.FloatChannel">
<em class="property">class </em><code class="descclassname">ndscan.result_channels.</code><code class="descname">FloatChannel</code><span class="sig-paren">(</span><em>path: str</em>, <em>description: str = ''</em>, <em>display_hints: Dict[str</em>, <em>Any] = {}</em>, <em>min=None</em>, <em>max=None</em>, <em>unit: str = ''</em>, <em>scale=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/result_channels.html#FloatChannel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.FloatChannel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="ndscan.result_channels.IntChannel">
<em class="property">class </em><code class="descclassname">ndscan.result_channels.</code><code class="descname">IntChannel</code><span class="sig-paren">(</span><em>path: str</em>, <em>description: str = ''</em>, <em>display_hints: Dict[str</em>, <em>Any] = {}</em>, <em>min=None</em>, <em>max=None</em>, <em>unit: str = ''</em>, <em>scale=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/result_channels.html#IntChannel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.IntChannel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="ndscan.result_channels.OpaqueChannel">
<em class="property">class </em><code class="descclassname">ndscan.result_channels.</code><code class="descname">OpaqueChannel</code><span class="sig-paren">(</span><em>path: str</em>, <em>description: str = ''</em>, <em>display_hints: Dict[str</em>, <em>Any] = {}</em>, <em>save_by_default: bool = True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/result_channels.html#OpaqueChannel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.OpaqueChannel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="ndscan.result_channels.SubscanChannel">
<em class="property">class </em><code class="descclassname">ndscan.result_channels.</code><code class="descname">SubscanChannel</code><span class="sig-paren">(</span><em>path: str</em>, <em>description: str = ''</em>, <em>display_hints: Dict[str</em>, <em>Any] = {}</em>, <em>save_by_default: bool = True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/result_channels.html#SubscanChannel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.result_channels.SubscanChannel" title="Permalink to this definition">¶</a></dt>
<dd><p>Channel that stores the scan metadata for a subscan.</p>
<p>Serialised as a JSON string for HDF5 compatibility.</p>
</dd></dl>

</div>
</div>
<div class="section" id="scan-execution">
<h2>Scan execution<a class="headerlink" href="#scan-execution" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-ndscan.scan_runner">
<span id="ndscan-scan-runner-module"></span><h3><a class="reference internal" href="#module-ndscan.scan_runner" title="ndscan.scan_runner"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ndscan.scan_runner</span></code></a> module<a class="headerlink" href="#module-ndscan.scan_runner" title="Permalink to this headline">¶</a></h3>
<dl class="exception">
<dt id="ndscan.scan_runner.ScanFinished">
<em class="property">exception </em><code class="descclassname">ndscan.scan_runner.</code><code class="descname">ScanFinished</code><a class="reference internal" href="_modules/ndscan/scan_runner.html#ScanFinished"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.scan_runner.ScanFinished" title="Permalink to this definition">¶</a></dt>
<dd><p>Used internally to signal that a scan has been successfully completed (points
exhausted).</p>
<p>This is a kludge to work around a bug where tuples of empty lists crash the ARTIQ
RPC code (kernel aborts), and should never be visible to the user.</p>
</dd></dl>

<dl class="class">
<dt id="ndscan.scan_runner.ScanRunner">
<em class="property">class </em><code class="descclassname">ndscan.scan_runner.</code><code class="descname">ScanRunner</code><span class="sig-paren">(</span><em>managers_or_parent</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/scan_runner.html#ScanRunner"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.scan_runner.ScanRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the actual loop that executes an <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpFragment</span></code> for a specified list
of scan axes (on either the host or core device, as appropriate).</p>
<p>Integrates with the ARTIQ scheduler to pause/terminate execution as requested.</p>
<p>Conceptually, this is only a single function (<code class="docutils literal notranslate"><span class="pre">run()</span></code>), but is wrapped in a class
to follow the idiomatic ARTIQ kernel/<code class="docutils literal notranslate"><span class="pre">HasEnvironment</span></code> integration style.</p>
<dl class="method">
<dt id="ndscan.scan_runner.ScanRunner.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>fragment: ndscan.fragment.ExpFragment, spec: ndscan.scan_runner.ScanSpec, axis_sinks: List[ndscan.result_channels.ResultSink]</em><span class="sig-paren">)</span> &#x2192; None<a class="reference internal" href="_modules/ndscan/scan_runner.html#ScanRunner.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.scan_runner.ScanRunner.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a scan of the given fragment, with axes as specified.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fragment</strong> – The fragment to iterate.</li>
<li><strong>options</strong> – The options for the scan generator.</li>
<li><strong>axis_sinks</strong> – A list of <code class="xref py py-class docutils literal notranslate"><span class="pre">ResultSink</span></code> instances to push the
coordinates for each scan point to, matching <code class="docutils literal notranslate"><span class="pre">scan.axes</span></code>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ndscan.scan_runner.describe_scan">
<code class="descclassname">ndscan.scan_runner.</code><code class="descname">describe_scan</code><span class="sig-paren">(</span><em>spec: ndscan.scan_runner.ScanSpec, fragment: ndscan.fragment.ExpFragment, short_result_names: Dict[ndscan.result_channels.ResultChannel, str]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/scan_runner.html#describe_scan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.scan_runner.describe_scan" title="Permalink to this definition">¶</a></dt>
<dd><p>Return metadata for the given spec in stringly typed dictionary form.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>spec</strong> – <code class="xref py py-class docutils literal notranslate"><span class="pre">ScanSpec</span></code> describing the scan.</li>
<li><strong>fragment</strong> – Fragment being scanned.</li>
<li><strong>short_result_names</strong> – Map from result channel objects to shortened names.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-ndscan.subscan">
<span id="ndscan-subscan-module"></span><h3><a class="reference internal" href="#module-ndscan.subscan" title="ndscan.subscan"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ndscan.subscan</span></code></a> module<a class="headerlink" href="#module-ndscan.subscan" title="Permalink to this headline">¶</a></h3>
<p>Implements subscans, that is, the ability for an <a class="reference internal" href="#ndscan.fragment.ExpFragment" title="ndscan.fragment.ExpFragment"><code class="xref py py-class docutils literal notranslate"><span class="pre">fragment.ExpFragment</span></code></a> to scan
another child fragment as part of its execution.</p>
<dl class="class">
<dt id="ndscan.subscan.Subscan">
<em class="property">class </em><code class="descclassname">ndscan.subscan.</code><code class="descname">Subscan</code><span class="sig-paren">(</span><em>run_fn: Callable[[ndscan.fragment.ExpFragment, ndscan.scan_runner.ScanSpec, List[ndscan.result_channels.ArraySink]], None], fragment: ndscan.fragment.ExpFragment, possible_axes: Dict[ndscan.parameters.ParamHandle, ndscan.scan_runner.ScanAxis], schema_channel: ndscan.result_channels.SubscanChannel, coordinate_channels: List[ndscan.result_channels.ResultChannel], child_result_sinks: Dict[ndscan.result_channels.ResultChannel, ndscan.result_channels.ArraySink], aggregate_result_channels: Dict[ndscan.result_channels.ResultChannel, ndscan.result_channels.ResultChannel], short_child_channel_names: Dict[str, ndscan.result_channels.ResultChannel]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/subscan.html#Subscan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.subscan.Subscan" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle returned by <a class="reference internal" href="#ndscan.subscan.setattr_subscan" title="ndscan.subscan.setattr_subscan"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setattr_subscan()</span></code></a>, allowing the subscan to actually be
executed.</p>
<dl class="method">
<dt id="ndscan.subscan.Subscan.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>axis_generators: List[Tuple[ndscan.parameters.ParamHandle, ndscan.scan_generator.ScanGenerator]], options=&lt;ndscan.scan_generator.ScanOptions object&gt;</em><span class="sig-paren">)</span> &#x2192; Tuple[Dict[ndscan.parameters.ParamHandle, list], Dict[ndscan.result_channels.ResultChannel, list]]<a class="reference internal" href="_modules/ndscan/subscan.html#Subscan.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.subscan.Subscan.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the subscan with the given axis iteration specifications, and return the
data point coordinates/result channel values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>axes</strong> – The list of scan axes (dimensions). Each element is a tuple
of parameter to scan (handle must have been passed to
<a class="reference internal" href="#ndscan.subscan.setattr_subscan" title="ndscan.subscan.setattr_subscan"><code class="xref py py-func docutils literal notranslate"><span class="pre">setattr_subscan()</span></code></a> to set up), and the <code class="xref py py-class docutils literal notranslate"><span class="pre">ScanGenerator</span></code> to use
to generate the points.</li>
<li><strong>options</strong> – Scan options to pass to <code class="xref py py-class docutils literal notranslate"><span class="pre">ScanSpec</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A tuple <code class="docutils literal notranslate"><span class="pre">(coordinates,</span> <span class="pre">values)</span></code>, each a dictionary mapping parameter
handles resp. result channels to lists of their values.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="ndscan.subscan.setattr_subscan">
<code class="descclassname">ndscan.subscan.</code><code class="descname">setattr_subscan</code><span class="sig-paren">(</span><em>owner: ndscan.fragment.Fragment, scan_name: str, fragment: ndscan.fragment.ExpFragment, axis_params: List[Tuple[ndscan.fragment.Fragment, str]], save_results_by_default: bool = True</em><span class="sig-paren">)</span> &#x2192; ndscan.subscan.Subscan<a class="reference internal" href="_modules/ndscan/subscan.html#setattr_subscan"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.subscan.setattr_subscan" title="Permalink to this definition">¶</a></dt>
<dd><p>Set up a scan for the given subfragment.</p>
<p>Result channels are set up to expose the scan data in the owning fragment for
introspectability.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>owner</strong> – The fragment to add the subscan to.</li>
<li><strong>scan_name</strong> – Name of the scan; appears in result channel names, and the
<a class="reference internal" href="#ndscan.subscan.Subscan" title="ndscan.subscan.Subscan"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscan</span></code></a> instance will be available as <code class="docutils literal notranslate"><span class="pre">owner.&lt;scan_name&gt;</span></code>.</li>
<li><strong>fragment</strong> – The runnable fragment to iterate over in the scan. Must be a
subfragment of <code class="docutils literal notranslate"><span class="pre">owner</span></code>.</li>
<li><strong>axis_params</strong> – List of <cite>(fragment, param_name)</cite> tuples defining the axes to be
scanned. It is possible to specify more axes than are actually used; they will
be overridden and set to their default values.</li>
<li><strong>save_results_by_default</strong> – Passed on to all derived result channels.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A <a class="reference internal" href="#ndscan.subscan.Subscan" title="ndscan.subscan.Subscan"><code class="xref py py-class docutils literal notranslate"><span class="pre">Subscan</span></code></a> instance to use to actually execute the scan.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-ndscan.auto_fit">
<span id="ndscan-auto-fit-module"></span><h3><a class="reference internal" href="#module-ndscan.auto_fit" title="ndscan.auto_fit"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ndscan.auto_fit</span></code></a> module<a class="headerlink" href="#module-ndscan.auto_fit" title="Permalink to this headline">¶</a></h3>
<p>Declarative fits, to be excecuted locally by the user interface displaying the data as
it comes in.</p>
<dl class="data">
<dt id="ndscan.auto_fit.FIT_OBJECTS">
<code class="descclassname">ndscan.auto_fit.</code><code class="descname">FIT_OBJECTS</code><em class="property"> = {'exponential_decay': &lt;oitg.fitting.FitBase.FitBase object&gt;, 'lorentzian': &lt;oitg.fitting.FitBase.FitBase object&gt;, 'parabola': &lt;oitg.fitting.FitBase.FitBase object&gt;, 'rabi_flop': &lt;oitg.fitting.FitBase.FitBase object&gt;}</em><a class="headerlink" href="#ndscan.auto_fit.FIT_OBJECTS" title="Permalink to this definition">¶</a></dt>
<dd><p>Registry of well-known fit procecure names.</p>
</dd></dl>

<dl class="data">
<dt id="ndscan.auto_fit.DEFAULT_POIS">
<code class="descclassname">ndscan.auto_fit.</code><code class="descname">DEFAULT_POIS</code><em class="property"> = {'exponential_decay': {'t_1_e': {'x': 't_1_e'}}, 'lorentzian': {'extremum': {'x': 'x0'}}, 'parabola': {'extremum': {'x': 'position'}}, 'rabi_flop': {'pi_time': {'x': 't_pi'}}}</em><a class="headerlink" href="#ndscan.auto_fit.DEFAULT_POIS" title="Permalink to this definition">¶</a></dt>
<dd><p>Default points of interest for various fit types (e.g. highlighting the π time for a
Rabi flop fit, or the extremum of a parabola.</p>
</dd></dl>

<dl class="class">
<dt id="ndscan.auto_fit.AutoFitSpec">
<em class="property">class </em><code class="descclassname">ndscan.auto_fit.</code><code class="descname">AutoFitSpec</code><span class="sig-paren">(</span><em>fit_type: str, data: Dict[str, Union[ndscan.parameters.ParamHandle, ndscan.result_channels.ResultChannel]], points_of_interest: Union[None, Dict[str, Dict[str, Any]]] = None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/auto_fit.html#AutoFitSpec"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.auto_fit.AutoFitSpec" title="Permalink to this definition">¶</a></dt>
<dd><p>Describes an automatically executed fit for a given combination of scan axes
and result channels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>fit_type</strong> – Fitting procedure name, per <a class="reference internal" href="#ndscan.auto_fit.FIT_OBJECTS" title="ndscan.auto_fit.FIT_OBJECTS"><code class="xref py py-data docutils literal notranslate"><span class="pre">FIT_OBJECTS</span></code></a>.</li>
<li><strong>data</strong> – Maps fit data axis names (<code class="docutils literal notranslate"><span class="pre">&quot;x&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;y&quot;</span></code>) to parameter handles or
result channels that supply the respective data.</li>
<li><strong>points_of_interest</strong> – Any points of interest to highlight in the fit results,
given in the form of a dictionary mapping (arbitrary) identifiers to
dictionaries mapping coordinate names to fit result names. If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
<a class="reference internal" href="#ndscan.auto_fit.DEFAULT_POIS" title="ndscan.auto_fit.DEFAULT_POIS"><code class="xref py py-data docutils literal notranslate"><span class="pre">DEFAULT_POIS</span></code></a> will be queried.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ndscan.auto_fit.AutoFitSpec.has_data">
<code class="descname">has_data</code><span class="sig-paren">(</span><em>scanned_axes: List[Tuple[str, str]]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/auto_fit.html#AutoFitSpec.has_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.auto_fit.AutoFitSpec.has_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return whether the scanned axes contain the data necessary for this fit to be
applicable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>scanned_axes</strong> – A list of axis identities, i.e. <code class="docutils literal notranslate"><span class="pre">(fqn,</span> <span class="pre">path_spec)</span></code>
tuples, being scanned over.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Whether this fit applies or not.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ndscan.auto_fit.AutoFitSpec.describe">
<code class="descname">describe</code><span class="sig-paren">(</span><em>get_axis_name: Callable[Tuple[str, str], str], get_channel_name: Callable[ndscan.result_channels.ResultChannel, str]</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/ndscan/auto_fit.html#AutoFitSpec.describe"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.auto_fit.AutoFitSpec.describe" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialise information about this fit to stringly typed metadata.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>get_axis_name</strong> – Callable to resolve axis identity to the string to use
to describe them.</li>
<li><strong>get_channel_name</strong> – Callable to resolve result channel path to the string
to use to describe them.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A string dictionary representation of this fit specification.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="experiment-entry-points">
<h2>Experiment entry points<a class="headerlink" href="#experiment-entry-points" title="Permalink to this headline">¶</a></h2>
<div class="section" id="module-ndscan.experiment">
<span id="ndscan-experiment-module"></span><h3><a class="reference internal" href="#module-ndscan.experiment" title="ndscan.experiment"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ndscan.experiment</span></code></a> module<a class="headerlink" href="#module-ndscan.experiment" title="Permalink to this headline">¶</a></h3>
<p>Top-level functions for launching <a class="reference internal" href="#ndscan.fragment.ExpFragment" title="ndscan.fragment.ExpFragment"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpFragment</span></code></a>s and their scans from the rest
of the ARTIQ <code class="docutils literal notranslate"><span class="pre">HasEnvironment</span></code> universe.</p>
<p>The two main entry points into the <a class="reference internal" href="#ndscan.fragment.ExpFragment" title="ndscan.fragment.ExpFragment"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpFragment</span></code></a> universe are</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt>scans (with axes and overrides set from the dashboard UI) via</dt>
<dd><a class="reference internal" href="#ndscan.experiment.make_fragment_scan_exp" title="ndscan.experiment.make_fragment_scan_exp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">make_fragment_scan_exp()</span></code></a>, and</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>manually launched fragments from vanilla ARTIQ <code class="docutils literal notranslate"><span class="pre">EnvExperiment</span></code>s using</dt>
<dd><a class="reference internal" href="#ndscan.experiment.run_fragment_once" title="ndscan.experiment.run_fragment_once"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run_fragment_once()</span></code></a> or <a class="reference internal" href="#ndscan.experiment.create_and_run_fragment_once" title="ndscan.experiment.create_and_run_fragment_once"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_and_run_fragment_once()</span></code></a>.</dd>
</dl>
</li>
</ul>
</div></blockquote>
<dl class="function">
<dt id="ndscan.experiment.make_fragment_scan_exp">
<code class="descclassname">ndscan.experiment.</code><code class="descname">make_fragment_scan_exp</code><span class="sig-paren">(</span><em>fragment_class: Type[ndscan.fragment.ExpFragment]</em><span class="sig-paren">)</span> &#x2192; Type[ndscan.experiment.FragmentScanExperiment]<a class="reference internal" href="_modules/ndscan/experiment.html#make_fragment_scan_exp"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.experiment.make_fragment_scan_exp" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#ndscan.experiment.FragmentScanExperiment" title="ndscan.experiment.FragmentScanExperiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">FragmentScanExperiment</span></code></a> subclass that scans the given
<a class="reference internal" href="#ndscan.fragment.ExpFragment" title="ndscan.fragment.ExpFragment"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpFragment</span></code></a>, ready to be picked up by the ARTIQ explorer/…</p>
<p>This is the default way of creating scan experiments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyExpFragment</span><span class="p">(</span><span class="n">ExpFragment</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">build_fragment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ...</span>

    <span class="k">def</span> <span class="nf">run_once</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ...</span>

<span class="n">MyExpFragmentScan</span> <span class="o">=</span> <span class="n">make_fragment_scan_exp</span><span class="p">(</span><span class="n">MyExpFragment</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="ndscan.experiment.FragmentScanExperiment">
<em class="property">class </em><code class="descclassname">ndscan.experiment.</code><code class="descname">FragmentScanExperiment</code><span class="sig-paren">(</span><em>managers_or_parent</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/experiment.html#FragmentScanExperiment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.experiment.FragmentScanExperiment" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements possibly (trivial) scans of an <a class="reference internal" href="#ndscan.fragment.ExpFragment" title="ndscan.fragment.ExpFragment"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpFragment</span></code></a>, with overrides
and scan axes as specified by the <a class="reference internal" href="#ndscan.experiment.PARAMS_ARG_KEY" title="ndscan.experiment.PARAMS_ARG_KEY"><code class="xref py py-data docutils literal notranslate"><span class="pre">PARAMS_ARG_KEY</span></code></a> dataset, and result
channels being broadcasted to datasets.</p>
<p>See <a class="reference internal" href="#ndscan.experiment.make_fragment_scan_exp" title="ndscan.experiment.make_fragment_scan_exp"><code class="xref py py-meth docutils literal notranslate"><span class="pre">make_fragment_scan_exp()</span></code></a> for a convenience method to create subclasses for
a specific <a class="reference internal" href="#ndscan.fragment.ExpFragment" title="ndscan.fragment.ExpFragment"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpFragment</span></code></a>.</p>
<dl class="method">
<dt id="ndscan.experiment.FragmentScanExperiment.build">
<code class="descname">build</code><span class="sig-paren">(</span><em>fragment_init: Callable[ndscan.fragment.ExpFragment]</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/experiment.html#FragmentScanExperiment.build"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.experiment.FragmentScanExperiment.build" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>fragment_init</strong> – Callable to create the top-level <code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpFragment()</span></code>
instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ndscan.experiment.FragmentScanExperiment.prepare">
<code class="descname">prepare</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/experiment.html#FragmentScanExperiment.prepare"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.experiment.FragmentScanExperiment.prepare" title="Permalink to this definition">¶</a></dt>
<dd><p>Collect parameters to set from both scan axes and simple overrides, and
initialise result channels.</p>
</dd></dl>

<dl class="method">
<dt id="ndscan.experiment.FragmentScanExperiment.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/ndscan/experiment.html#FragmentScanExperiment.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.experiment.FragmentScanExperiment.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the (possibly trivial) scan.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="ndscan.experiment.ScanSpecError">
<em class="property">class </em><code class="descclassname">ndscan.experiment.</code><code class="descname">ScanSpecError</code><a class="reference internal" href="_modules/ndscan/experiment.html#ScanSpecError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.experiment.ScanSpecError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when the scan specification passed in <a class="reference internal" href="#ndscan.experiment.PARAMS_ARG_KEY" title="ndscan.experiment.PARAMS_ARG_KEY"><code class="xref py py-data docutils literal notranslate"><span class="pre">PARAMS_ARG_KEY</span></code></a> is not valid
for the given fragment.</p>
</dd></dl>

<dl class="data">
<dt id="ndscan.experiment.PARAMS_ARG_KEY">
<code class="descclassname">ndscan.experiment.</code><code class="descname">PARAMS_ARG_KEY</code><em class="property"> = 'ndscan_params'</em><a class="headerlink" href="#ndscan.experiment.PARAMS_ARG_KEY" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the <code class="docutils literal notranslate"><span class="pre">artiq.language.HasEnvironment</span></code> argument that is used to confer the
list of available parameters to the dashboard plugin, and to pass the information
about scanned and overridden parameters to the <a class="reference internal" href="#ndscan.experiment.FragmentScanExperiment" title="ndscan.experiment.FragmentScanExperiment"><code class="xref py py-class docutils literal notranslate"><span class="pre">FragmentScanExperiment</span></code></a>
when it is launched.</p>
<p>Users should not need to directly interface with this.</p>
</dd></dl>

<dl class="function">
<dt id="ndscan.experiment.run_fragment_once">
<code class="descclassname">ndscan.experiment.</code><code class="descname">run_fragment_once</code><span class="sig-paren">(</span><em>fragment: ndscan.fragment.ExpFragment</em><span class="sig-paren">)</span> &#x2192; Dict[ndscan.result_channels.ResultChannel, Any]<a class="reference internal" href="_modules/ndscan/experiment.html#run_fragment_once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.experiment.run_fragment_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialise the passed fragment and run it once, capturing and returning the
values from any result channels.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A dictionary mapping <code class="xref py py-class docutils literal notranslate"><span class="pre">ResultChannel</span></code> instances to their values
(or <code class="docutils literal notranslate"><span class="pre">None</span></code> if not pushed to).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="ndscan.experiment.create_and_run_fragment_once">
<code class="descclassname">ndscan.experiment.</code><code class="descname">create_and_run_fragment_once</code><span class="sig-paren">(</span><em>env: artiq.language.environment.HasEnvironment, fragment_class: Type[ndscan.fragment.ExpFragment], *args, **kwargs</em><span class="sig-paren">)</span> &#x2192; Dict[str, Any]<a class="reference internal" href="_modules/ndscan/experiment.html#create_and_run_fragment_once"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ndscan.experiment.create_and_run_fragment_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an instance of the passed <a class="reference internal" href="#ndscan.fragment.ExpFragment" title="ndscan.fragment.ExpFragment"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpFragment</span></code></a> type and runs it once,
returning the values pushed to any result channels.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyExpFragment</span><span class="p">(</span><span class="n">ExpFragment</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">build_fragment</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ...</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setattr_result</span><span class="p">(</span><span class="s2">&quot;foo&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run_once</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># ...</span>

<span class="k">class</span> <span class="nc">MyEnvExperiment</span><span class="p">(</span><span class="n">EnvExperiment</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">create_and_run_once</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MyExpFragment</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s2">&quot;foo&quot;</span><span class="p">])</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>env</strong> – The <code class="docutils literal notranslate"><span class="pre">HasEnvironment</span></code> to use.</li>
<li><strong>fragment_class</strong> – The <a class="reference internal" href="#ndscan.fragment.ExpFragment" title="ndscan.fragment.ExpFragment"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpFragment</span></code></a> class to instantiate.</li>
<li><strong>args</strong> – Any arguments to forward to <code class="docutils literal notranslate"><span class="pre">build_fragment()</span></code>.</li>
<li><strong>kwargs</strong> – Any keyword arguments to forward to <code class="docutils literal notranslate"><span class="pre">build_fragment()</span></code>.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A dictionary mapping result channel names to their values (or <code class="docutils literal notranslate"><span class="pre">None</span></code> if
not pushed to).</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="ndscan" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, David Nadlinger

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>